module.exports=[76808,a=>{"use strict";class b{excerpts=new Map;tags=new Map;storyboards=new Map;books=new Map;getExcerpts(){return Array.from(this.excerpts.values()).sort((a,b)=>b.updatedAt.getTime()-a.updatedAt.getTime())}getExcerpt(a){return this.excerpts.get(a)}saveExcerpt(a){this.excerpts.set(a.id,a)}deleteExcerpt(a){return this.excerpts.delete(a)}getExcerptsByTag(a){return this.getExcerpts().filter(b=>b.tags.includes(a))}getTags(){return Array.from(this.tags.values()).sort((a,b)=>a.name.localeCompare(b.name))}getTag(a){return this.tags.get(a)}saveTag(a){this.tags.set(a.id,a)}deleteTag(a){return this.tags.delete(a)}getUsedTags(){let a=new Set;return this.getExcerpts().forEach(b=>{b.tags.forEach(b=>a.add(b))}),Array.from(a).sort()}getStoryboards(){return Array.from(this.storyboards.values()).sort((a,b)=>b.updatedAt.getTime()-a.updatedAt.getTime())}getStoryboard(a){return this.storyboards.get(a)}saveStoryboard(a){this.storyboards.set(a.id,a)}deleteStoryboard(a){return this.storyboards.delete(a)}getBooks(){return Array.from(this.books.values()).sort((a,b)=>b.updatedAt.getTime()-a.updatedAt.getTime())}getBook(a){return this.books.get(a)}saveBook(a){this.books.set(a.id,a)}deleteBook(a){return this.books.delete(a)}}let c=new b;a.s(["storage",0,c])},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},19568,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(66680);let f={randomUUID:e.randomUUID},g=new Uint8Array(256),h=g.length,i=[];for(let a=0;a<256;++a)i.push((a+256).toString(16).slice(1));let j=function(a,b,c){if(f.randomUUID&&!b&&!a)return f.randomUUID();var d=a,j=c;let k=(d=d||{}).random??d.rng?.()??(h>g.length-16&&((0,e.randomFillSync)(g),h=0),g.slice(h,h+=16));if(k.length<16)throw Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,b){if((j=j||0)<0||j+16>b.length)throw RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let a=0;a<16;++a)b[j+a]=k[a];return b}return function(a,b=0){return(i[a[b+0]]+i[a[b+1]]+i[a[b+2]]+i[a[b+3]]+"-"+i[a[b+4]]+i[a[b+5]]+"-"+i[a[b+6]]+i[a[b+7]]+"-"+i[a[b+8]]+i[a[b+9]]+"-"+i[a[b+10]]+i[a[b+11]]+i[a[b+12]]+i[a[b+13]]+i[a[b+14]]+i[a[b+15]]).toLowerCase()}(k)};var k=a.i(28861),l=a.i(76808);function m({excerpt:a,mode:e}){let f=(0,d.useRouter)(),[g,h]=(0,c.useState)(a?.title||""),[i,m]=(0,c.useState)(a?.content||""),[n,o]=(0,c.useState)(a?.tags||[]),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{s(l.storage.getUsedTags())},[]);let v=a=>{let b=a.replace(/<[^>]*>/g,"").trim();return b?b.split(/\s+/).length:0},w=a=>{let b=a.trim();b&&!n.includes(b)&&(o(a=>[...a,b]),q(""))},x=async b=>{if(b.preventDefault(),!g.trim()||!i.trim())return void alert("Please provide both a title and content for your excerpt.");u(!0);try{let b=new Date,c={id:a?.id||j(),title:g.trim(),content:i.trim(),tags:n,createdAt:a?.createdAt||b,updatedAt:b,wordCount:v(i)};l.storage.saveExcerpt(c),f.push("/excerpts")}catch(a){console.error("Error saving excerpt:",a),alert("There was an error saving your excerpt. Please try again.")}finally{u(!1)}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"create"===e?"Create New Excerpt":"Edit Excerpt"})}),(0,b.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,b.jsx)("input",{type:"text",id:"title",value:g,onChange:a=>h(a.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",placeholder:"Enter excerpt title...",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,b.jsx)(k.default,{value:i,onChange:m,placeholder:"Start writing your excerpt...",height:400}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Word count: ",v(i)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:n.map(a=>(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{o(b=>b.filter(b=>b!==a))},className:"ml-2 text-blue-600 hover:text-blue-800",children:"Ã—"})]},a))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),w(p))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add a tag..."}),(0,b.jsx)("button",{type:"button",onClick:()=>w(p),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Add"})]}),r.length>0&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Available tags:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:r.filter(a=>!n.includes(a)).map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>w(a),className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded hover:bg-gray-200 transition-colors",children:["+ ",a]},a))})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{f.back()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:t,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:t||!g.trim()||!i.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Saving...":"create"===e?"Create Excerpt":"Update Excerpt"})]})]})]})}a.s(["default",()=>m],19568)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4344c3a6._.js.map