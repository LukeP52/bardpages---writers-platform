{"version":3,"sources":["turbopack:///[project]/src/lib/storage.ts","turbopack:///[project]/src/app/excerpts/page.tsx"],"sourcesContent":["import { Excerpt, Tag, Storyboard, Book } from '@/types'\n\nclass InMemoryStorage {\n  private excerpts: Map<string, Excerpt> = new Map()\n  private tags: Map<string, Tag> = new Map()\n  private storyboards: Map<string, Storyboard> = new Map()\n  private books: Map<string, Book> = new Map()\n\n  // Excerpts\n  getExcerpts(): Excerpt[] {\n    return Array.from(this.excerpts.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getExcerpt(id: string): Excerpt | undefined {\n    return this.excerpts.get(id)\n  }\n\n  saveExcerpt(excerpt: Excerpt): void {\n    this.excerpts.set(excerpt.id, excerpt)\n  }\n\n  deleteExcerpt(id: string): boolean {\n    return this.excerpts.delete(id)\n  }\n\n  getExcerptsByTag(tagName: string): Excerpt[] {\n    return this.getExcerpts().filter(excerpt => \n      excerpt.tags.includes(tagName)\n    )\n  }\n\n  // Tags\n  getTags(): Tag[] {\n    return Array.from(this.tags.values()).sort((a, b) => a.name.localeCompare(b.name))\n  }\n\n  getTag(id: string): Tag | undefined {\n    return this.tags.get(id)\n  }\n\n  saveTag(tag: Tag): void {\n    this.tags.set(tag.id, tag)\n  }\n\n  deleteTag(id: string): boolean {\n    return this.tags.delete(id)\n  }\n\n  getUsedTags(): string[] {\n    const usedTags = new Set<string>()\n    this.getExcerpts().forEach(excerpt => {\n      excerpt.tags.forEach(tag => usedTags.add(tag))\n    })\n    return Array.from(usedTags).sort()\n  }\n\n  // Storyboards\n  getStoryboards(): Storyboard[] {\n    return Array.from(this.storyboards.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getStoryboard(id: string): Storyboard | undefined {\n    return this.storyboards.get(id)\n  }\n\n  saveStoryboard(storyboard: Storyboard): void {\n    this.storyboards.set(storyboard.id, storyboard)\n  }\n\n  deleteStoryboard(id: string): boolean {\n    return this.storyboards.delete(id)\n  }\n\n  // Books\n  getBooks(): Book[] {\n    return Array.from(this.books.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getBook(id: string): Book | undefined {\n    return this.books.get(id)\n  }\n\n  saveBook(book: Book): void {\n    this.books.set(book.id, book)\n  }\n\n  deleteBook(id: string): boolean {\n    return this.books.delete(id)\n  }\n}\n\nexport const storage = new InMemoryStorage()","'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { Excerpt } from '@/types'\nimport { storage } from '@/lib/storage'\n\nexport default function ExcerptsPage() {\n  const [excerpts, setExcerpts] = useState<Excerpt[]>([])\n  const [filteredExcerpts, setFilteredExcerpts] = useState<Excerpt[]>([])\n  const [selectedTags, setSelectedTags] = useState<string[]>([])\n  const [availableTags, setAvailableTags] = useState<string[]>([])\n  const [searchQuery, setSearchQuery] = useState('')\n\n  useEffect(() => {\n    const loadedExcerpts = storage.getExcerpts()\n    const usedTags = storage.getUsedTags()\n    \n    setExcerpts(loadedExcerpts)\n    setFilteredExcerpts(loadedExcerpts)\n    setAvailableTags(usedTags)\n  }, [])\n\n  useEffect(() => {\n    let filtered = excerpts\n\n    if (selectedTags.length > 0) {\n      filtered = filtered.filter(excerpt =>\n        selectedTags.some(tag => excerpt.tags.includes(tag))\n      )\n    }\n\n    if (searchQuery) {\n      filtered = filtered.filter(excerpt =>\n        excerpt.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        excerpt.content.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    }\n\n    setFilteredExcerpts(filtered)\n  }, [excerpts, selectedTags, searchQuery])\n\n  const toggleTag = (tag: string) => {\n    setSelectedTags(prev =>\n      prev.includes(tag)\n        ? prev.filter(t => t !== tag)\n        : [...prev, tag]\n    )\n  }\n\n  const getExcerptPreview = (content: string, maxLength = 150) => {\n    const textContent = content.replace(/<[^>]*>/g, '').trim()\n    return textContent.length > maxLength\n      ? textContent.substring(0, maxLength) + '...'\n      : textContent\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Your Excerpts</h1>\n        <Link\n          href=\"/excerpts/new\"\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          + New Excerpt\n        </Link>\n      </div>\n\n      <div className=\"mb-6 space-y-4\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Search excerpts...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n        </div>\n\n        {availableTags.length > 0 && (\n          <div>\n            <p className=\"text-sm font-medium text-gray-700 mb-2\">Filter by tags:</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {availableTags.map(tag => (\n                <button\n                  key={tag}\n                  onClick={() => toggleTag(tag)}\n                  className={`px-3 py-1 rounded-full text-sm transition-colors ${\n                    selectedTags.includes(tag)\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                  }`}\n                >\n                  {tag}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {filteredExcerpts.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl mb-4\">üìù</div>\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n            {excerpts.length === 0 ? 'No excerpts yet' : 'No excerpts found'}\n          </h3>\n          <p className=\"text-gray-500 mb-6\">\n            {excerpts.length === 0 \n              ? 'Start writing your first excerpt to begin your story collection.'\n              : 'Try adjusting your search or filter criteria.'\n            }\n          </p>\n          {excerpts.length === 0 && (\n            <Link\n              href=\"/excerpts/new\"\n              className=\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Create Your First Excerpt\n            </Link>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredExcerpts.map(excerpt => (\n            <Link key={excerpt.id} href={`/excerpts/${excerpt.id}`}>\n              <div className=\"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6\">\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2 line-clamp-2\">\n                  {excerpt.title}\n                </h3>\n                <p className=\"text-gray-600 text-sm mb-3 line-clamp-3\">\n                  {getExcerptPreview(excerpt.content)}\n                </p>\n                <div className=\"flex flex-wrap gap-1 mb-3\">\n                  {excerpt.tags.slice(0, 3).map(tag => (\n                    <span\n                      key={tag}\n                      className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\"\n                    >\n                      {tag}\n                    </span>\n                  ))}\n                  {excerpt.tags.length > 3 && (\n                    <span className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                      +{excerpt.tags.length - 3} more\n                    </span>\n                  )}\n                </div>\n                <div className=\"flex justify-between items-center text-sm text-gray-500\">\n                  <span>{excerpt.wordCount} words</span>\n                  <span>{excerpt.updatedAt.toLocaleDateString()}</span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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"}