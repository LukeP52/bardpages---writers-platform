{"version":3,"sources":["turbopack:///[project]/src/lib/storage.ts","turbopack:///[project]/src/app/excerpts/[id]/page.tsx"],"sourcesContent":["import { Excerpt, Tag, Storyboard, Book } from '@/types'\n\nclass InMemoryStorage {\n  private excerpts: Map<string, Excerpt> = new Map()\n  private tags: Map<string, Tag> = new Map()\n  private storyboards: Map<string, Storyboard> = new Map()\n  private books: Map<string, Book> = new Map()\n\n  // Excerpts\n  getExcerpts(): Excerpt[] {\n    return Array.from(this.excerpts.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getExcerpt(id: string): Excerpt | undefined {\n    return this.excerpts.get(id)\n  }\n\n  saveExcerpt(excerpt: Excerpt): void {\n    this.excerpts.set(excerpt.id, excerpt)\n  }\n\n  deleteExcerpt(id: string): boolean {\n    return this.excerpts.delete(id)\n  }\n\n  getExcerptsByTag(tagName: string): Excerpt[] {\n    return this.getExcerpts().filter(excerpt => \n      excerpt.tags.includes(tagName)\n    )\n  }\n\n  // Tags\n  getTags(): Tag[] {\n    return Array.from(this.tags.values()).sort((a, b) => a.name.localeCompare(b.name))\n  }\n\n  getTag(id: string): Tag | undefined {\n    return this.tags.get(id)\n  }\n\n  saveTag(tag: Tag): void {\n    this.tags.set(tag.id, tag)\n  }\n\n  deleteTag(id: string): boolean {\n    return this.tags.delete(id)\n  }\n\n  getUsedTags(): string[] {\n    const usedTags = new Set<string>()\n    this.getExcerpts().forEach(excerpt => {\n      excerpt.tags.forEach(tag => usedTags.add(tag))\n    })\n    return Array.from(usedTags).sort()\n  }\n\n  // Storyboards\n  getStoryboards(): Storyboard[] {\n    return Array.from(this.storyboards.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getStoryboard(id: string): Storyboard | undefined {\n    return this.storyboards.get(id)\n  }\n\n  saveStoryboard(storyboard: Storyboard): void {\n    this.storyboards.set(storyboard.id, storyboard)\n  }\n\n  deleteStoryboard(id: string): boolean {\n    return this.storyboards.delete(id)\n  }\n\n  // Books\n  getBooks(): Book[] {\n    return Array.from(this.books.values()).sort((a, b) => \n      b.updatedAt.getTime() - a.updatedAt.getTime()\n    )\n  }\n\n  getBook(id: string): Book | undefined {\n    return this.books.get(id)\n  }\n\n  saveBook(book: Book): void {\n    this.books.set(book.id, book)\n  }\n\n  deleteBook(id: string): boolean {\n    return this.books.delete(id)\n  }\n}\n\nexport const storage = new InMemoryStorage()","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { Excerpt } from '@/types'\nimport { storage } from '@/lib/storage'\nimport RichTextEditor from '@/components/RichTextEditor'\n\ninterface ExcerptDetailPageProps {\n  params: { id: string }\n}\n\nexport default function ExcerptDetailPage({ params }: ExcerptDetailPageProps) {\n  const router = useRouter()\n  const [excerpt, setExcerpt] = useState<Excerpt | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const loadedExcerpt = storage.getExcerpt(params.id)\n    setExcerpt(loadedExcerpt || null)\n    setIsLoading(false)\n  }, [params.id])\n\n  const handleDelete = async () => {\n    if (!excerpt) return\n    \n    const confirmed = confirm(`Are you sure you want to delete \"${excerpt.title}\"? This action cannot be undone.`)\n    if (!confirmed) return\n\n    storage.deleteExcerpt(excerpt.id)\n    router.push('/excerpts')\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-3/4 mb-4\"></div>\n          <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\"></div>\n          <div className=\"h-96 bg-gray-200 rounded\"></div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!excerpt) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"text-center py-12\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Excerpt Not Found</h1>\n          <p className=\"text-gray-500 mb-6\">The excerpt you're looking for doesn't exist or may have been deleted.</p>\n          <Link\n            href=\"/excerpts\"\n            className=\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Back to Excerpts\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"flex justify-between items-start mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{excerpt.title}</h1>\n          <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n            <span>{excerpt.wordCount} words</span>\n            <span>•</span>\n            <span>Created {excerpt.createdAt.toLocaleDateString()}</span>\n            <span>•</span>\n            <span>Updated {excerpt.updatedAt.toLocaleDateString()}</span>\n          </div>\n        </div>\n        <div className=\"flex space-x-3\">\n          <Link\n            href={`/excerpts/${excerpt.id}/edit`}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Edit\n          </Link>\n          <button\n            onClick={handleDelete}\n            className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n\n      {excerpt.tags.length > 0 && (\n        <div className=\"mb-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            {excerpt.tags.map(tag => (\n              <span\n                key={tag}\n                className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full\"\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n        <div className=\"p-6\">\n          <RichTextEditor\n            value={excerpt.content}\n            onChange={() => {}}\n            readonly={true}\n            height={500}\n          />\n        </div>\n      </div>\n\n      <div className=\"mt-8 flex justify-between\">\n        <Link\n          href=\"/excerpts\"\n          className=\"text-blue-600 hover:text-blue-800 transition-colors\"\n        >\n          ← Back to Excerpts\n        </Link>\n        <Link\n          href={`/excerpts/${excerpt.id}/edit`}\n          className=\"text-blue-600 hover:text-blue-800 transition-colors\"\n        >\n          Edit this excerpt →\n        </Link>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}